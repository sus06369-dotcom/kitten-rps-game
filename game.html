<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kitten RPS Game - Play</title>
<style>
body {
    background: linear-gradient(to bottom, #f5f0e1, #e8dfc6);
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-direction: column;
    margin: 0;
    padding: 0 10px;
    box-sizing: border-box;
    min-height: 100vh;
}

.center-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    margin-top: 5vh;
    text-align: center;
    position: relative;
}

.fade-in { opacity: 0; transition: opacity 0.8s; }
.visible { opacity: 1; }

#intro-text { color: #4b0082; font-size: 8vw; font-weight: bold; margin-bottom: 3vh; word-break: keep-all; }
#kitten-container { position: relative; margin-bottom: 3vh; }
#kitten-img { max-width: 220px; height: auto; margin-bottom: 3vh; }
#computer-choice { position: absolute; bottom: 0%; left: 0%; height: auto; z-index: 2; }
#computer-choice.scissors { width: 40%; } #computer-choice.rock { width: 50%; } #computer-choice.paper { width: 50%; }
#emoji-display { font-size: 45vw; position: absolute; top: 52%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; line-height: 1; z-index: 5; }

/* æ–°å¢å°è©æ–‡å­— */
#line-text { 
    position: absolute; 
    top: -50px; 
    width: 100%; 
    color: #4b0082; 
    font-weight: bold; 
    font-size: 5vw; 
    pointer-events: none;
}

.choice-buttons { display: flex; gap: 30px; margin-bottom: 3vh; }
.choice-buttons button { padding: 12px 30px; font-size: 20px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; transition: transform 0.2s; }
.choice-buttons button:hover { transform: scale(1.05); }
#yes-btn { background-color: #6ca0dc; color: #fff; } #no-btn { background-color: #e58b8b; color: #fff; }

#status-text { color: #4b0082; font-size: 6vw; font-weight: bold; margin-bottom: 0.5vh; }
#hint-text { color: #4b0082; font-size: 5vw; margin-bottom: 3vh; }
#result { font-size: 8vw; font-weight: bold; color: #4b0082; margin: 15px 0; }

#game-display { display: flex; flex-direction: column; justify-content: space-between; align-items: center; height: 200px; position: relative; }
.player-buttons { display: flex; gap: 30px; }
.player-buttons img { width: 70px; height: 70px; cursor: pointer; opacity: 0; transform: translateY(20px); transition: opacity 0.8s, transform 0.8s; }

/* å½©å±‘å’Œç´ ææ‰è½æ¨£å¼ */
.falling-item { position: fixed; pointer-events: none; top: -50px; animation-name: fall; animation-timing-function: ease-in; animation-fill-mode: forwards; }
@keyframes fall { 0% { transform: translateY(0) rotate(0deg); opacity:1; } 100% { transform: translateY(100vh) rotate(360deg); opacity:0; } }
</style>
</head>
<body>

<div class="center-container">
    <div id="intro-text" class="fade-in">å˜¿ï¼Œèƒ½å’Œå°è²“çŒœå€‹æ‹³å—ï¼Ÿ</div>
    
    <div id="kitten-container">
        <div id="line-text"></div> <!-- æ–°å¢å°è©é¡¯ç¤ºå€åŸŸ -->
        <img src="kitten.png" id="kitten-img" class="fade-in">
        <img src="" id="computer-choice" alt="">
        <div id="emoji-display"></div>
    </div>

    <div class="choice-buttons fade-in" id="choice-btns" style="visibility:hidden;">
        <button id="yes-btn">å¾ˆæ¨‚æ„</button>
        <button id="no-btn">ä¸æ¨‚æ„</button>
    </div>

    <div id="status-text" class="fade-in" style="visibility:hidden;">æº–å‚™å¥½äº†å—ï¼Ÿ</div>
    <div id="hint-text" class="fade-in" style="visibility:hidden;">å¥½äº†å°±é»æ“Šå‡ºæ‹³å§</div>

    <div id="game-display">
        <div id="result"></div>
        <div class="player-buttons" id="player-buttons">
            <img src="r.png" alt="å‰ªåˆ€" data-choice="r">
            <img src="g.png" alt="çŸ³é ­" data-choice="g">
            <img src="b.png" alt="å¸ƒ" data-choice="b">
        </div>
    </div>
</div>

<script>
const introText = document.getElementById('intro-text');
const kittenImg = document.getElementById('kitten-img');
const choiceBtns = document.getElementById('choice-btns');
const yesBtn = document.getElementById('yes-btn');
const noBtn = document.getElementById('no-btn');
const statusText = document.getElementById('status-text');
const hintText = document.getElementById('hint-text');
const playerButtons = document.querySelectorAll('#player-buttons img');
const playerBtnContainer = document.getElementById('player-buttons');
const computerChoiceImg = document.getElementById('computer-choice');
const resultDiv = document.getElementById('result');
const emojiDisplay = document.getElementById('emoji-display');
const lineText = document.getElementById('line-text');

const computerOptions = ['scissors2.png','rock2.png','paper2.png'];
let noClickCount = 0;

// ç©å®¶é€£å‹è¨ˆæ•¸
let playerWinCount = 0;
let kittenWinCount = 0;
let drawCount = 0;

// å°è©è³‡æ–™
const lines = {
    player: {
        normal: ["â€¦å’ªåªæ˜¯å¤§æ„äº†ï¼ä¸‹å±€æ‰ä¸æœƒè¼¸çµ¦ä½ å‘¢ï¼ğŸ˜–","æ‰ã€æ‰ä¸æ˜¯è®“ä½ å•¦ï¼å†ä¾†ä¸€æ¬¡å’ªä¸€å®šè´ï¼ğŸ˜¡","å’ªä»Šå¤©ç‹€æ…‹ä¸å¥½è€Œå·²â€¦å†ç©ä¸€å±€å˜›ï¼ŸğŸ˜«"],
        smallWin: ["æ¬¸ï¼Ÿåƒ¥å€–è€Œå·²å•¦ï¼åƒ¥å€–ï¼ğŸ¤¯","å–‚å–‚â€¦ä½ èªçœŸäº†å–”ï¼ŸğŸ˜§","å’¦ï¼Ÿé€£å‹ï¼Ÿä¸è¡Œï¼Œå’ªè¦å°ˆå¿ƒèµ·ä¾†äº†ï¼ğŸ˜¤"],
        bigWin: ["å¥½å§â€¦â€¦é€™æ¬¡ç®—ä½ è´ï¼Œçµ¦å’ªç­‰è‘—ï¼Œå’ªæœƒå¾©ä»‡çš„ï¼ï¼ğŸ˜¬","å¯æƒ¡â€¦å’ªæ˜æ˜æœ‰é åˆ¤çš„èªªâ€¦â€¦ğŸ˜¨","æ¬¸ï¼Ÿä½ æ€éº¼é€™éº¼å²å®³â€¦ ä¸è¡Œï¼Œå’ªè¦é›ªæ¥ï¼ğŸ˜ ","å–‚ï¼ï¼ä½ æ˜¯ä¸æ˜¯å·å­¸è²“å’ªæ‹³æ³•ï¼â˜¹ï¸"],
        superWin: ["æ€éº¼å›äº‹â€¦å’ªçš„è²“å’ªç›´è¦ºå¤±éˆäº†å—ï¼Ÿï¼ğŸ˜¨","ä¸è¡Œï¼ä¸è¡Œï¼å’ªä¸€å®šè¦ç¿»ç›¤ï¼ğŸ˜¡","å°ä¸èµ·ï¼Œå’ªéŒ¯äº†â€¦å†çµ¦å’ªä¸€æ¬¡æ©Ÿæœƒå–µâ€¦â€¦ğŸ¥¹","â€¦â€¦ï¼ˆæ²‰é»˜ï¼‰å’ªç´¯äº†â€¦â€¦ğŸ˜­"]
    },
    kitten: {
        normal: ["å’ªè´äº†ï¼è¦å†ä¾†ä¸€å±€å—ï¼ŸğŸ˜","æ¬¸ï¼Ÿä½ æ˜¯ä¸æ˜¯å‡ºå¾—æœ‰é»æ…¢ï¼ŸğŸ«¢","ä½ ä¸‹å±€èƒ½è´å’ªå˜›ï¼ŸğŸ˜","å˜¿å˜¿ï¼Œè¢«å’ªæŠ“åˆ°äº†å§ï½ğŸ¤ª"],
        smallWin: ["é€£è´å…©å±€ï½å’ªä»Šå¤©èªªä¸å®šå¾ˆå¼·ï¼ŸğŸ˜³","å˜¿ï½ä½ è©²ä¸æœƒè¢«å’ªçœ‹ç©¿äº†å§ï¼ŸğŸ˜","æ¬¸ï¼Ÿåˆè´äº†ï¼Ÿä½ çš„å¥—è·¯å¥½åƒæœ‰é»æ˜é¡¯å“¦ï½ğŸ«£","æ¬¸ï¼Ÿå…©é€£æ•—ï¼Ÿï¼è¦ä¸è¦ä¼‘æ¯ä¸€ä¸‹å†ä¾†ï¼ŸğŸ¤¨","åˆè¼¸ï¼Ÿä½ ä»Šå¤©ç‹€æ…‹æ˜¯ä¸æ˜¯ä¸å¤ªè¡Œå“¦ğŸ˜—"],
        bigWin: ["å“å‘€ï½ä½ é€™æ¨£ä¸‹å»æœƒè¢«å’ªä¸€ç›´è´å–”ï½ğŸ«£","å’ªæ˜¯ä¸æ˜¯è©²æ”¶æ–‚ä¸€ä¸‹å¯¦åŠ›å‘¢ï¼Ÿï¼ˆæ‰ä¸æœƒï¼‰ğŸ¤­","æ˜¯ä¸æ˜¯è©²æ‰¿èªå’ªæ˜¯çŒœæ‹³å¤©æ‰ğŸ¤©","å’ªéƒ½ä¸å¥½æ„æ€è´å¤ªå¤šäº†ğŸ¤ª"],
        superWin: ["äº”é€£å‹ï½å’ªä»Šå¤©æ˜¯ç¥å–µå§ï¼ğŸ˜¼","ä½ æ˜¯ä¸æ˜¯è©²æ›å€‹ç­–ç•¥äº†ï¼Ÿçœ‹èµ·ä¾†æ²’ç”¨å–µï½ğŸ˜","å’ªå·²ç¶“æº–å‚™å¥½å…­é€£å‹äº†ï¼Œä½ å‘¢ï½ğŸ¤©","é€™å·²ç¶“ä¸æ˜¯çŒœæ‹³ï¼Œæ˜¯å¯¦åŠ›çš„å·®è·å–µï½ğŸ«£","å–µå“ˆå“ˆï¼Œåˆè´äº†ï¼ä½ é‚„æ•¢æŒ‘æˆ°å’ªå—ï¼ŸğŸ˜"]
    },
    draw: {
        normal: ["å–µï¼Ÿå¹³æ‰‹ï¼Ÿï¼é‚£â€¦å†ä¾†ä¸€æ¬¡ï¼ğŸ˜›","ä½ æ˜¯ä¸æ˜¯å·çœ‹å’ªæƒ³å‡ºä»€éº¼ï¼ŸğŸ«¤","å“¼ï¼Œé€™æ¬¡ç®—ä½ é‹æ°£å¥½â€¦å†æ¯”ä¸€æ¬¡ï¼ğŸ˜–","å¹³å±€ï½é‚£å°±å†æˆ°ä¸€å±€ï¼ğŸ˜µâ€ğŸ’«"],
        consecutive: ["åˆå¹³æ‰‹ï¼Ÿï¼ä½ ä¹Ÿå¤ªé›£çºäº†å–µï½ğŸ˜µâ€ğŸ’«","æ¬¸ï¼Ÿæ€éº¼è€æ˜¯å¹³æ‰‹å•Šâ€¦ğŸ˜³","å¹³æ‰‹åˆå¹³æ‰‹â€¦é€™æ¨£å’ªè¦ç”Ÿæ°£äº†ï¼ğŸ˜¤","å’¦ï¼Ÿä½ æ˜¯ä¸æ˜¯å·å·çŒœåˆ°å’ªçš„å¥—è·¯ï¼ŸğŸ˜µ","å’ªæœ‰é»å—æŒ«â€¦ä¸è¡Œï¼Œå†ä¾†ï¼ğŸ˜–"]
    }
};

// åˆå§‹æ·¡å…¥
setTimeout(()=>{introText.classList.add('visible');}, 200);
setTimeout(()=>{kittenImg.classList.add('visible');}, 1000);
setTimeout(()=>{choiceBtns.style.visibility='visible'; choiceBtns.classList.add('visible');}, 1800);

// é»æ“Šä¸æ¨‚æ„
noBtn.addEventListener('click',()=>{
    noClickCount++;
    emojiDisplay.textContent = noClickCount === 1 ? 'ğŸ¥º' : 'ğŸ¥¹';
});

// é»æ“Šå¾ˆæ¨‚æ„
yesBtn.addEventListener('click',()=>{
    introText.style.display='none';
    choiceBtns.style.display='none';
    emojiDisplay.textContent='';

    setTimeout(()=>{statusText.style.visibility='visible'; statusText.classList.add('visible');},200);
    setTimeout(()=>{hintText.style.visibility='visible'; hintText.classList.add('visible');},1000);

    setTimeout(()=>{
        playerBtnContainer.style.visibility='visible';
        playerButtons.forEach((btn, i)=>{
            setTimeout(()=>{
                btn.style.opacity = '1';
                btn.style.transform = 'translateY(0)';
            },i*400);
        });
    },1800);
});

// é€å­—é¡¯ç¤ºå°è©å‡½æ•¸
function typeLine(text) {
    lineText.textContent = '';
    let i = 0;
    const interval = setInterval(()=>{
        lineText.textContent += text[i];
        i++;
        if(i >= text.length) clearInterval(interval);
    }, 50);
}

// ç©å®¶å‡ºæ‹³
playerButtons.forEach(btn=>{
    btn.addEventListener('click',()=>{
        // é»æ“Šæ™‚æ¸…æ‰ä¸Šä¸€å±€å°è©
        lineText.textContent = '';

        const playerChoice = btn.getAttribute('data-choice');
        const computerChoiceFile = computerOptions[Math.floor(Math.random()*3)];
        computerChoiceImg.src = computerChoiceFile;

        computerChoiceImg.className = '';
        if(computerChoiceFile==='scissors2.png') computerChoiceImg.classList.add('scissors');
        else if(computerChoiceFile==='rock2.png') computerChoiceImg.classList.add('rock');
        else if(computerChoiceFile==='paper2.png') computerChoiceImg.classList.add('paper');

        statusText.style.visibility='visible';
        hintText.style.visibility='visible';

        let result = '';
        if(playerChoice==='r'){
            if(computerChoiceFile==='scissors2.png') result='Win';
            else if(computerChoiceFile==='rock2.png') result='Draw';
            else if(computerChoiceFile==='paper2.png') result='Lose';
        } else if(playerChoice==='g'){
            if(computerChoiceFile==='scissors2.png') result='Lose';
            else if(computerChoiceFile==='rock2.png') result='Win';
            else if(computerChoiceFile==='paper2.png') result='Draw';
        } else if(playerChoice==='b'){
            if(computerChoiceFile==='scissors2.png') result='Win';
            else if(computerChoiceFile==='rock2.png') result='Lose';
            else if(computerChoiceFile==='paper2.png') result='Draw';
        }

        // è¨ˆç®—é€£å‹æˆ–é€£å¹³
        if(result==='Win'){
            playerWinCount++;
            kittenWinCount = 0;
            drawCount = 0;
        } else if(result==='Lose'){
            kittenWinCount++;
            playerWinCount = 0;
            drawCount = 0;
        } else if(result==='Draw'){
            drawCount++;
            playerWinCount = 0;
            kittenWinCount = 0;
        }

        // é¸æ“‡å°è©
        let lineArr = [];
        if(result==='Win'){
            if(playerWinCount===1) lineArr = lines.player.normal;
            else if(playerWinCount>=2 && playerWinCount<=3) lineArr = lines.player.smallWin;
            else if(playerWinCount===4) lineArr = lines.player.bigWin;
            else if(playerWinCount>=5) lineArr = lines.player.superWin;
        } else if(result==='Lose'){
            if(kittenWinCount===1) lineArr = lines.kitten.normal;
            else if(kittenWinCount>=2 && kittenWinCount<=3) lineArr = lines.kitten.smallWin;
            else if(kittenWinCount===4) lineArr = lines.kitten.bigWin;
            else if(kittenWinCount>=5) lineArr = lines.kitten.superWin;
        } else if(result==='Draw'){
            if(drawCount===1) lineArr = lines.draw.normal;
            else lineArr = lines.draw.consecutive;
        }

        const selectedLine = lineArr[Math.floor(Math.random()*lineArr.length)];
        typeLine(selectedLine);

        resultDiv.textContent = result;

        // ç©å®¶å‹åˆ©æ‰è½ç´ æ + å½©å±‘
        if(result==='Win'){
            const fallingItems=['c.png','ch.png','pp.png'];
            const colors=['#f94144','#f3722c','#f9c74f','#90be6d','#43aa8b','#577590','#f72585','#7209b7'];

            for(let i=0;i<60;i++){ // æ•¸é‡æ›´å¤š
                const item=document.createElement('img');
                const file=fallingItems[Math.floor(Math.random()*fallingItems.length)];
                item.src=file;
                item.className='falling-item';
                item.style.left=Math.random()*100+'vw';
                const scale=1 + Math.random()*1.0; 
                item.style.width=(30*scale)+'px';
                item.style.height=(30*scale)+'px';
                item.style.animationDuration=(2 + Math.random()*2)+'s';
                item.style.transform=`rotate(${Math.random()*360}deg)`;
                document.body.appendChild(item);
                setTimeout(()=>{document.body.removeChild(item);},4000);

                const confetti=document.createElement('div');
                confetti.className='falling-item';
                confetti.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)];
                const size=12 + Math.random()*18;
                confetti.style.width=size+'px';
                confetti.style.height=size+'px';
                confetti.style.left=Math.random()*100+'vw';
                confetti.style.borderRadius='2px';
                confetti.style.animationDuration=(2 + Math.random()*2)+'s';
                confetti.style.transform=`rotate(${Math.random()*360}deg)`;
                document.body.appendChild(confetti);
                setTimeout(()=>{document.body.removeChild(confetti);},4000);
            }
        }
    });
});
</script>

</body>
</html>
