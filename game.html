<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kitten RPS Game - Play</title>
<style>
body {
    background: linear-gradient(to bottom, #f5f0e1, #e8dfc6);
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-direction: column;
    margin: 0;
    padding: 0 10px;
    box-sizing: border-box;
    min-height: 100vh;
}

.center-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    margin-top: 5vh;
    text-align: center;
    position: relative;
}

.fade-in { opacity: 0; transition: opacity 0.8s; }
.visible { opacity: 1; }

#intro-text { color: #4b0082; font-size: 8vw; font-weight: bold; margin-bottom: 3vh; word-break: keep-all; }
#kitten-container { position: relative; margin-bottom: 3vh; }
#kitten-img { max-width: 220px; height: auto; margin-bottom: 3vh; }
#computer-choice { position: absolute; bottom: 0%; left: 0%; height: auto; z-index: 2; }
#computer-choice.scissors { width: 40%; } #computer-choice.rock { width: 50%; } #computer-choice.paper { width: 50%; }
#emoji-display { font-size: 45vw; position: absolute; top: 52%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; line-height: 1; z-index: 5; }

.choice-buttons { display: flex; gap: 30px; margin-bottom: 3vh; }
.choice-buttons button { padding: 12px 30px; font-size: 20px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; transition: transform 0.2s; }
.choice-buttons button:hover { transform: scale(1.05); }
#yes-btn { background-color: #6ca0dc; color: #fff; } #no-btn { background-color: #e58b8b; color: #fff; }

#status-text { color: #4b0082; font-size: 6vw; font-weight: bold; margin-bottom: 0.5vh; }
#hint-text { color: #4b0082; font-size: 5vw; margin-bottom: 3vh; }
#result { font-size: 8vw; font-weight: bold; color: #4b0082; margin: 15px 0; }

#game-display { display: flex; flex-direction: column; justify-content: space-between; align-items: center; height: 200px; position: relative; }
.player-buttons { display: flex; gap: 30px; }
.player-buttons img { width: 70px; height: 70px; cursor: pointer; opacity: 0; transform: translateY(20px); transition: opacity 0.8s, transform 0.8s; }

/* ÂΩ©Â±ëÂíåÁ¥†ÊùêÊéâËêΩÊ®£Âºè */
.falling-item { position: fixed; pointer-events: none; top: -50px; animation-name: fall; animation-timing-function: ease-in; animation-fill-mode: forwards; }
@keyframes fall { 0% { transform: translateY(0) rotate(0deg); opacity:1; } 100% { transform: translateY(100vh) rotate(360deg); opacity:0; } }
</style>
</head>
<body>

<div class="center-container">
    <div id="intro-text" class="fade-in">ÂòøÔºåËÉΩÂíåÂ∞èË≤ìÁåúÂÄãÊã≥ÂóéÔºü</div>
    
    <div id="kitten-container">
        <img src="kitten.png" id="kitten-img" class="fade-in">
        <img src="" id="computer-choice" alt="">
        <div id="emoji-display"></div>
    </div>

    <div class="choice-buttons fade-in" id="choice-btns" style="visibility:hidden;">
        <button id="yes-btn">ÂæàÊ®ÇÊÑè</button>
        <button id="no-btn">‰∏çÊ®ÇÊÑè</button>
    </div>

    <div id="status-text" class="fade-in" style="visibility:hidden;"></div>
    <div id="hint-text" class="fade-in" style="visibility:hidden;">Â•Ω‰∫ÜÂ∞±ÈªûÊìäÂá∫Êã≥Âêß</div>

    <div id="game-display">
        <div id="result"></div>
        <div class="player-buttons" id="player-buttons">
            <img src="r.png" alt="Ââ™ÂàÄ" data-choice="r">
            <img src="g.png" alt="Áü≥È†≠" data-choice="g">
            <img src="b.png" alt="Â∏É" data-choice="b">
        </div>
    </div>
</div>

<script>
// ====================== ÂéüÂßãËÆäÊï∏ ======================
const introText = document.getElementById('intro-text');
const kittenImg = document.getElementById('kitten-img');
const choiceBtns = document.getElementById('choice-btns');
const yesBtn = document.getElementById('yes-btn');
const noBtn = document.getElementById('no-btn');
const statusText = document.getElementById('status-text');
const hintText = document.getElementById('hint-text');
const playerButtons = document.querySelectorAll('#player-buttons img');
const playerBtnContainer = document.getElementById('player-buttons');
const computerChoiceImg = document.getElementById('computer-choice');
const resultDiv = document.getElementById('result');
const emojiDisplay = document.getElementById('emoji-display');
const computerOptions = ['scissors2.png','rock2.png','paper2.png'];
let noClickCount = 0;

// ====================== Âè∞Ë©ûÊ∏ÖÂñÆ ======================
const dialogues = {
    kittenWin: {
        normal: ["Âí™Ë¥è‰∫ÜÔºÅË¶ÅÂÜç‰æÜ‰∏ÄÂ±ÄÂóéÔºüüòù","Ê¨∏Ôºü‰Ω†ÊòØ‰∏çÊòØÂá∫ÂæóÊúâÈªûÊÖ¢Ôºüü´¢","‰Ω†‰∏ãÂ±ÄËÉΩË¥èÂí™ÂòõÔºüüòè","ÂòøÂòøÔºåË¢´Âí™ÊäìÂà∞‰∫ÜÂêßÔΩûü§™"],
        smallWin: ["ÈÄ£Ë¥èÂÖ©Â±ÄÔΩûÂí™‰ªäÂ§©Ë™™‰∏çÂÆöÂæàÂº∑Ôºüüò≥","ÂòøÔΩû‰Ω†Ë©≤‰∏çÊúÉË¢´Âí™ÁúãÁ©ø‰∫ÜÂêßÔºüüòè","Ê¨∏ÔºüÂèàË¥è‰∫ÜÔºü‰Ω†ÁöÑÂ•óË∑ØÂ•ΩÂÉèÊúâÈªûÊòéÈ°ØÂì¶ÔΩûü´£","Ê¨∏ÔºüÂÖ©ÈÄ£ÊïóÔºüÔºÅË¶Å‰∏çË¶Å‰ºëÊÅØ‰∏Ä‰∏ãÂÜç‰æÜÔºüü§®","ÂèàËº∏Ôºü‰Ω†‰ªäÂ§©ÁãÄÊÖãÊòØ‰∏çÊòØ‰∏çÂ§™Ë°åÂì¶üòó"],
        bigWin: ["ÂìéÂëÄÔΩû‰Ω†ÈÄôÊ®£‰∏ãÂéªÊúÉË¢´Âí™‰∏ÄÁõ¥Ë¥èÂñîÔΩûü´£","Âí™ÊòØ‰∏çÊòØË©≤Êî∂ÊñÇ‰∏Ä‰∏ãÂØ¶ÂäõÂë¢ÔºüÔºàÊâç‰∏çÊúÉÔºâü§≠","ÊòØ‰∏çÊòØË©≤ÊâøË™çÂí™ÊòØÁåúÊã≥Â§©Êâçü§©","Âí™ÈÉΩ‰∏çÂ•ΩÊÑèÊÄùË¥èÂ§™Â§ö‰∫Üü§™"],
        ultraWin: ["‰∫îÈÄ£ÂãùÔΩûÂí™‰ªäÂ§©ÊòØÁ•ûÂí™ÂêßÔºÅüòº","‰Ω†ÊòØ‰∏çÊòØË©≤ÊèõÂÄãÁ≠ñÁï•‰∫ÜÔºüÁúãËµ∑‰æÜÊ≤íÁî®ÂñµÔΩûüòè","Âí™Â∑≤Á∂ìÊ∫ñÂÇôÂ•ΩÂÖ≠ÈÄ£Âãù‰∫ÜÔºå‰Ω†Âë¢ÔΩûü§©","ÈÄôÂ∑≤Á∂ì‰∏çÊòØÁåúÊã≥ÔºåÊòØÂØ¶ÂäõÁöÑÂ∑ÆË∑ùÂí™ÔΩûü´£","ÂñµÂìàÂìàÔºåÂèàË¥è‰∫ÜÔºÅ‰Ω†ÈÇÑÊï¢ÊåëÊà∞Âí™ÂóéÔºüüòù"]
    },
    playerWin: {
        normal: ["‚Ä¶Âí™Âè™ÊòØÂ§ßÊÑè‰∫ÜÔºÅ‰∏ãÂ±ÄÊâç‰∏çÊúÉËº∏Áµ¶‰Ω†Âë¢ÔºÅüòñ","Êâç„ÄÅÊâç‰∏çÊòØËÆì‰Ω†Âï¶ÔºÅÂÜç‰æÜ‰∏ÄÊ¨°Âí™‰∏ÄÂÆöË¥èÔºÅüò°","Âí™‰ªäÂ§©ÁãÄÊÖã‰∏çÂ•ΩËÄåÂ∑≤‚Ä¶ÂÜçÁé©‰∏ÄÂ±ÄÂòõÔºüüò´"],
        smallWin: ["Ê¨∏ÔºüÂÉ•ÂÄñËÄåÂ∑≤Âï¶ÔºÅÂÉ•ÂÄñÔºÅü§Ø","ÂñÇÂñÇ‚Ä¶‰Ω†Ë™çÁúü‰∫ÜÂñîÔºüüòß","Âí¶ÔºüÈÄ£ÂãùÔºü‰∏çË°åÔºåÂí™Ë¶ÅÂ∞àÂøÉËµ∑‰æÜ‰∫ÜÔºÅüò§"],
        bigWin: ["Â•ΩÂêß‚Ä¶‚Ä¶ÈÄôÊ¨°ÁÆó‰Ω†Ë¥èÔºåÁµ¶Âí™Á≠âËëóÔºåÂí™ÊúÉÂæ©‰ªáÁöÑÔºÅÔºÅüò¨","ÂèØÊÉ°‚Ä¶ÊàëÊòéÊòéÊúâÈ†êÂà§ÁöÑË™™‚Ä¶‚Ä¶üò®","Ê¨∏Ôºü‰Ω†ÊÄéÈ∫ºÈÄôÈ∫ºÂé≤ÂÆ≥‚Ä¶ ‰∏çË°åÔºåÂí™Ë¶ÅÈõ™ÊÅ•ÔºÅüò†","ÂñÇÔºÅÔºÅ‰Ω†ÊòØ‰∏çÊòØÂÅ∑Â≠∏Âí™Êã≥Ê≥ïÔºÅ‚òπÔ∏è"],
        ultraWin: ["ÊÄéÈ∫ºÂõû‰∫ã‚Ä¶Âí™ÁöÑË≤ìÂí™Áõ¥Ë¶∫Â§±Èùà‰∫ÜÂóéÔºüÔºÅüò®","‰∏çË°åÔºÅ‰∏çË°åÔºÅÂí™‰∏ÄÂÆöË¶ÅÁøªÁõ§ÔºÅüò°","Â∞ç‰∏çËµ∑ÔºåÂí™ÈåØ‰∫Ü‚Ä¶ÂÜçÁµ¶Âí™‰∏ÄÊ¨°Ê©üÊúÉÂñµ‚Ä¶‚Ä¶ü•π","‚Ä¶‚Ä¶ÔºàÊ≤âÈªòÔºâÂí™Á¥Ø‰∫Ü‚Ä¶‚Ä¶üò≠"]
    },
    draw: {
        normal: ["ÂñµÔºüÂπ≥ÊâãÔºüÔºÅÈÇ£‚Ä¶ÂÜç‰æÜ‰∏ÄÊ¨°ÔºÅüòõ","‰Ω†ÊòØ‰∏çÊòØÂÅ∑ÁúãÂí™ÊÉ≥Âá∫‰ªÄÈ∫ºÔºüü´§","ÂìºÔºåÈÄôÊ¨°ÁÆó‰Ω†ÈÅãÊ∞£Â•Ω‚Ä¶ÂÜçÊØî‰∏ÄÊ¨°ÔºÅüòñ","Âπ≥Â±ÄÔΩûÈÇ£Â∞±ÂÜçÊà∞‰∏ÄÂ±ÄÔºÅüòµ‚Äçüí´","ÔºüÔºÅ‰∏ãÂ±ÄÂí™ÂøÖË¥èüò†"],
        consecutive: ["ÂèàÂπ≥ÊâãÔºüÔºÅ‰Ω†‰πüÂ§™Èõ£Á∫è‰∫ÜÂí™ÔΩûüòµ‚Äçüí´","Ê¨∏ÔºüÊÄéÈ∫ºËÄÅÊòØÂπ≥ÊâãÂïä‚Ä¶üò≥","Âπ≥ÊâãÂèàÂπ≥Êâã‚Ä¶ÈÄôÊ®£Âí™Ë¶ÅÁîüÊ∞£‰∫ÜÔºÅüò§","Âí¶Ôºü‰Ω†ÊòØ‰∏çÊòØÂÅ∑ÂÅ∑ÁåúÂà∞Âí™ÁöÑÂ•óË∑ØÔºüüòµ","Âí™ÊúâÈªûÂèóÊå´‚Ä¶‰∏çË°åÔºåÂÜç‰æÜÔºÅüòñ"]
    }
};

// ====================== ÈÄêÂ≠óÈ°ØÁ§∫ÂáΩÊï∏ ======================
let dialogueInterval;
function showDialogue(text){
    clearInterval(dialogueInterval);
    statusText.style.color = '#4b0082';
    statusText.textContent = '';
    let i = 0;
    dialogueInterval = setInterval(()=>{
        if(i < text.length){
            statusText.textContent += text[i];
            i++;
        } else {
            clearInterval(dialogueInterval);
        }
    },50); // ÊØèÂÄãÂ≠ó50ms
}

// ÈªûÊìä‰∏ã‰∏ÄÂ±ÄÊôÇÊ∏ÖÈô§Âè∞Ë©û
function clearDialogue(){
    clearInterval(dialogueInterval);
    statusText.textContent = '';
}

// ÂèñÂæóÈö®Ê©üÂè∞Ë©û
function getRandomDialogue(result, streak){
    let arr;
    if(result==='Win'){
        if(streak>=5) arr = dialogues.playerWin.ultraWin;
        else if(streak===4) arr = dialogues.playerWin.bigWin;
        else if(streak>=2) arr = dialogues.playerWin.smallWin;
        else arr = dialogues.playerWin.normal;
    } else if(result==='Lose'){
        if(streak>=5) arr = dialogues.kittenWin.ultraWin;
        else if(streak===4) arr = dialogues.kittenWin.bigWin;
        else if(streak>=2) arr = dialogues.kittenWin.smallWin;
        else arr = dialogues.kittenWin.normal;
    } else if(result==='Draw'){
        if(streak>=2) arr = dialogues.draw.consecutive;
        else arr = dialogues.draw.normal;
    }
    return arr[Math.floor(Math.random()*arr.length)];
}

// ====================== Áé©ÂÆ∂Âá∫Êã≥‰∫ã‰ª∂ ======================
let playerWinStreak = 0;
let kittenWinStreak = 0;
let drawStreak = 0;

// ÂàùÂßãÊ∑°ÂÖ•
setTimeout(()=>{introText.classList.add('visible');}, 200);
setTimeout(()=>{kittenImg.classList.add('visible');}, 1000);
setTimeout(()=>{choiceBtns.style.visibility='visible'; choiceBtns.classList.add('visible');}, 1800);

// ÈªûÊìä‰∏çÊ®ÇÊÑè
noBtn.addEventListener('click',()=>{
    noClickCount++;
    if(noClickCount===1) emojiDisplay.textContent='ü•∫';
    else emojiDisplay.textContent='ü•π';
});

// ÈªûÊìäÂæàÊ®ÇÊÑè
yesBtn.addEventListener('click',()=>{
    introText.style.display='none';
    choiceBtns.style.display='none';
    emojiDisplay.textContent='';

    setTimeout(()=>{statusText.style.visibility='visible'; statusText.classList.add('visible');},200);
    setTimeout(()=>{hintText.style.visibility='visible'; hintText.classList.add('visible');},1000);

    setTimeout(()=>{
        playerBtnContainer.style.visibility='visible';
        playerButtons.forEach((btn, i)=>{
            setTimeout(()=>{
                btn.style.opacity = '1';
                btn.style.transform = 'translateY(0)';
            },i*400);
        });
    },1800);
});

// Áé©ÂÆ∂Âá∫Êã≥
playerButtons.forEach(btn=>{
    btn.addEventListener('click',()=>{
        clearDialogue(); // Ê∏ÖÈô§‰∏ä‰∏ÄÂ±ÄÂè∞Ë©û

        const playerChoice = btn.getAttribute('data-choice');
        const computerChoiceFile = computerOptions[Math.floor(Math.random()*3)];
        computerChoiceImg.src = computerChoiceFile;

        computerChoiceImg.className = '';
        if(computerChoiceFile==='scissors2.png') computerChoiceImg.classList.add('scissors');
        else if(computerChoiceFile==='rock2.png') computerChoiceImg.classList.add('rock');
        else if(computerChoiceFile==='paper2.png') computerChoiceImg.classList.add('paper');

        statusText.style.visibility='hidden';
        hintText.style.visibility='hidden';

        let result = '';
        if(playerChoice==='r'){
            if(computerChoiceFile==='scissors2.png') result='Draw';
            else if(computerChoiceFile==='rock2.png') result='Lose';
            else if(computerChoiceFile==='paper2.png') result='Win';
        } else if(playerChoice==='g'){
            if(computerChoiceFile==='scissors2.png') result='Win';
            else if(computerChoiceFile==='rock2.png') result='Draw';
            else if(computerChoiceFile==='paper2.png') result='Lose';
        } else if(playerChoice==='b'){
            if(computerChoiceFile==='scissors2.png') result='Lose';
            else if(computerChoiceFile==='rock2.png') result='Win';
            else if(computerChoiceFile==='paper2.png') result='Draw';
        }

        resultDiv.textContent = result;

    // Êõ¥Êñ∞ÈÄ£ÂãùË®àÊï∏
        if(result==='Win'){ playerWinStreak++; kittenWinStreak=0; drawStreak=0; }
        else if(result==='Lose'){ kittenWinStreak++; playerWinStreak=0; drawStreak=0; }
        else { drawStreak++; playerWinStreak=0; kittenWinStreak=0; }

        // È°ØÁ§∫Âè∞Ë©û
        const dialogue = getRandomDialogue(result, result==='Draw'?drawStreak:(result==='Win'?playerWinStreak:kittenWinStreak));
        showDialogue(dialogue);

        // Áé©ÂÆ∂ÂãùÂà©ÊéâËêΩÁ¥†Êùê + ÂΩ©Â±ë
        if(result==='Win'){
            const fallingItems=['c.png','ch.png','pp.png'];
            const colors=['#f94144','#f3722c','#f9c74f','#90be6d','#43aa8b','#577590','#f72585','#7209b7'];

            for(let i=0;i<60;i++){ 
                const item=document.createElement('img');
                const file=fallingItems[Math.floor(Math.random()*fallingItems.length)];
                item.src=file;
                item.className='falling-item';
                item.style.left=Math.random()*100+'vw';
                const scale=1 + Math.random()*1.0; 
                item.style.width=(30*scale)+'px';
                item.style.height=(30*scale)+'px';
                item.style.animationDuration=(2 + Math.random()*2)+'s';
                item.style.transform=`rotate(${Math.random()*360}deg)`;
                document.body.appendChild(item);
                setTimeout(()=>{document.body.removeChild(item);},4000);

                const confetti=document.createElement('div');
                confetti.className='falling-item';
                confetti.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)];
                const size=12 + Math.random()*18; 
                confetti.style.width=size+'px';
                confetti.style.height=size+'px';
                confetti.style.left=Math.random()*100+'vw';
                confetti.style.borderRadius='2px';
                confetti.style.animationDuration=(2 + Math.random()*2)+'s';
                confetti.style.transform=`rotate(${Math.random()*360}deg)`;
                document.body.appendChild(confetti);
                setTimeout(()=>{document.body.removeChild(confetti);},4000);
            }
        }
    });
});
</script>

</body>
</html>
